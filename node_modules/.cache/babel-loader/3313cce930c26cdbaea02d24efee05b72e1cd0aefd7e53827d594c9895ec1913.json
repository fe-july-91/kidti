{"ast":null,"code":"import{scaleLinear,scaleBand,max,extent,axisBottom}from'd3';import*as d3 from\"d3\";import{months}from\"../../Utils/kit\";import{sortDataByMonth}from'../../Shared/hendlers/sortDataByMoonth';export function DrawChart(SVG,data,height,width,margin,selectedMonth,slider,HandleGraph){sortDataByMonth(data);const xScale=scaleBand().domain(months.map(m=>m)).range([0,width-margin]).padding(0.4);const yScale=scaleLinear().domain(extent([0,max(data,d=>d.value)+3])).nice().range([height-margin,margin*2]);// SVG.selectAll('.bar').remove();\n// Create bars\nconst bars=SVG.selectAll('.bar').data(data,d=>d.id);// Enter - Add new bars with animation\nconst barsEnter=bars.enter().append('rect').attr('class','bar').attr('x',d=>xScale(d.month)).attr('y',d=>yScale(0))// Start from the bottom of the chart\n.attr('width',xScale.bandwidth()).attr('height',0)// Start with height 0\n.attr('fill',d=>d.month===selectedMonth?'#FF5C9D':'#50C3F9').attr('rx','10').attr('ry','10').style('cursor','pointer').on('click',(event,d)=>{HandleGraph(d);});barsEnter.transition().duration(500).attr('y',d=>yScale(d.value))// Animate to the final y position\n.attr('height',d=>height-margin-yScale(d.value));// Animate to the final height\n// Update existing bars without animation\nbars.transition().duration(0)// Remove transition to avoid animating all bars\n.attr('x',d=>xScale(d.month)).attr('y',d=>slider>0&&d.month===selectedMonth?yScale(slider):yScale(d.value)).attr('width',xScale.bandwidth()).attr('height',d=>slider>0&&d.month===selectedMonth?height-margin-yScale(slider):height-margin-yScale(d.value)).attr('fill',d=>d.month===selectedMonth?'#FF5C9D':'#50C3F9').attr('rx','10').attr('ry','10');// Exit\nbars.exit().remove();// Add labels\nconst labels=SVG.selectAll('.label').data(data);// Enter\nlabels.enter().append('text').attr('class','label').attr('x',d=>xScale(d.month)+xScale.bandwidth()/2).attr('y',d=>yScale(d.value)-5).attr('text-anchor','middle').attr('fill',d=>d.month.toLowerCase()===selectedMonth.toLowerCase()?'#FF5C9D':'#625F6C').text(d=>slider>0&&d.month===selectedMonth?slider:d.value);// Update\nlabels.transition().duration(500).attr('x',d=>xScale(d.month)+xScale.bandwidth()/2).attr('y',d=>yScale(d.value)-5).attr('fill',d=>d.month.toLowerCase()===selectedMonth.toLowerCase()?'#FF5C9D':'#625F6C').text(d=>slider>0&&d.month===selectedMonth?slider:d.value);// Exit\nlabels.exit().remove();// Добавляем ось X\nSVG.selectAll('.x-axis').remove();const xAxisGroup=SVG.append('g').attr('class','x-axis').attr('transform',`translate(0,${height-margin})`).call(axisBottom(xScale).tickFormat(m=>m.slice(0,3))).selectAll('text').style('font-size','12px').style('cursor','pointer');xAxisGroup.style('fill',m=>m===selectedMonth?'#FF5C9D':'#625F6C').on('click',(event,m)=>{const targetMonthData=data.find(item=>item.month===m);if(targetMonthData){HandleGraph({month:m,value:targetMonthData.value});}else{HandleGraph({month:m,value:0});}});}","map":{"version":3,"names":["scaleLinear","scaleBand","max","extent","axisBottom","d3","months","sortDataByMonth","DrawChart","SVG","data","height","width","margin","selectedMonth","slider","HandleGraph","xScale","domain","map","m","range","padding","yScale","d","value","nice","bars","selectAll","id","barsEnter","enter","append","attr","month","bandwidth","style","on","event","transition","duration","exit","remove","labels","toLowerCase","text","xAxisGroup","call","tickFormat","slice","targetMonthData","find","item"],"sources":["/Users/mariashmakova/Projects/personal/kidti/src/Charts/HeightBarChart/DrowChart.js"],"sourcesContent":["import { scaleLinear,scaleBand, max, extent,axisBottom} from 'd3';\nimport * as d3 from \"d3\";\nimport { months } from \"../../Utils/kit\";\nimport { sortDataByMonth } from '../../Shared/hendlers/sortDataByMoonth';\n\n\nexport function DrawChart(\n  SVG,\n  data,\n  height,\n  width,\n  margin,\n  selectedMonth,\n  slider,\n  HandleGraph\n) {\n\n  sortDataByMonth(data);\n\n  const xScale = scaleBand()\n  .domain(months.map((m) => m))\n  .range([0, width - margin])\n  .padding(0.4);\n  \n  const yScale = scaleLinear()\n    .domain(extent([0, max(data, d => d.value) + 3]))\n    .nice()\n    .range([height - margin, margin * 2]);\n\n  // SVG.selectAll('.bar').remove();\n\n // Create bars\n  const bars = SVG.selectAll('.bar').data(data, d => d.id);\n\n\n// Enter - Add new bars with animation\nconst barsEnter = bars.enter()\n.append('rect')\n.attr('class', 'bar')\n.attr('x', d => xScale(d.month))\n.attr('y', d => yScale(0)) // Start from the bottom of the chart\n.attr('width', xScale.bandwidth())\n.attr('height', 0) // Start with height 0\n.attr('fill', d =>\n  d.month === selectedMonth\n    ? '#FF5C9D'\n    : '#50C3F9'\n)\n.attr('rx', '10')\n.attr('ry', '10')\n.style('cursor', 'pointer')\n.on('click', (event, d) => {\n  HandleGraph(d);\n});\n\nbarsEnter.transition()\n.duration(500)\n.attr('y', d => yScale(d.value)) // Animate to the final y position\n.attr('height', d => height - margin - yScale(d.value)); // Animate to the final height\n\n// Update existing bars without animation\nbars.transition()\n.duration(0) // Remove transition to avoid animating all bars\n.attr('x', d => xScale(d.month))\n.attr('y', d =>\n  slider > 0 && d.month === selectedMonth\n    ? yScale(slider)\n    : yScale(d.value)\n)\n.attr('width', xScale.bandwidth())\n.attr('height', d =>\n  slider > 0 && d.month === selectedMonth\n    ? height - margin - yScale(slider)\n    : height - margin - yScale(d.value)\n)\n.attr('fill', d =>\n  d.month === selectedMonth\n    ? '#FF5C9D'\n    : '#50C3F9'\n)\n.attr('rx', '10')\n.attr('ry', '10');\n\n\n// Exit\n  bars.exit().remove();\n  \n  // Add labels\n  const labels = SVG.selectAll('.label').data(data);\n\n  // Enter\n  labels.enter()\n    .append('text')\n    .attr('class', 'label')\n    .attr('x', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('y', d => yScale(d.value) - 5)\n    .attr('text-anchor', 'middle')\n    .attr('fill', d =>\n      d.month.toLowerCase() === selectedMonth.toLowerCase()\n        ? '#FF5C9D'\n        : '#625F6C'\n    )\n    .text(d =>\n      slider > 0 && d.month === selectedMonth\n        ? slider\n        : d.value);\n\n  // Update\n  labels\n    .transition()\n    .duration(500)\n    .attr('x', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('y', d => yScale(d.value) - 5)\n    .attr('fill', d =>\n      d.month.toLowerCase() === selectedMonth.toLowerCase()\n        ? '#FF5C9D'\n        : '#625F6C'\n    )\n    .text(d =>\n      slider > 0 && d.month === selectedMonth\n        ? slider\n        : d.value);\n\n  // Exit\n  labels.exit().remove();\n  \n  // Добавляем ось X\nSVG.selectAll('.x-axis').remove();\nconst xAxisGroup = SVG.append('g')\n  .attr('class', 'x-axis')\n  .attr('transform', `translate(0,${height - margin})`)\n  .call(axisBottom(xScale).tickFormat(m => m.slice(0, 3)))\n  .selectAll('text') \n  .style('font-size', '12px')\n  .style('cursor', 'pointer')\n  \nxAxisGroup\n  .style('fill', m => m === selectedMonth ? '#FF5C9D' : '#625F6C')\n  .on('click', (event, m) => {\n    const targetMonthData = data.find(item => item.month === m)\n    if (targetMonthData) {\n      HandleGraph({ month: m, value: targetMonthData.value});\n    } else {\n      HandleGraph({ month: m, value: 0});\n    }\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}