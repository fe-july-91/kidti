{"ast":null,"code":"import*as d3 from\"d3\";export function DrawEyesChart(SVG,width,arcColor,height,margin,sliderValue){let xOffset=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;const minValue=-10;const maxValue=12;// const arcColorFn = d3.interpolateHsl(d3.rgb('#e8e2ca'), d3.rgb('#3e6c0a'))\nconst radius=Math.min(width,height)/2-margin-4;// Найти или создать контейнер для диаграммы\nlet chartGroup=SVG.select(`g.chartGroup-${xOffset}`);if(chartGroup.empty()){chartGroup=SVG.append(\"g\").attr(\"class\",`chartGroup-${xOffset}`).attr(\"transform\",`translate(${width/2+xOffset}, ${height-margin})`);}// Очистка всех предыдущих элементов в chartGroup перед отрисовкой\nchartGroup.selectAll(\"*\").remove();// Настройка шкалы\nconst arcScale=d3.scaleLinear().domain([minValue,maxValue]).range([-Math.PI/2,Math.PI/2]);// Создание арки\nconst arc=d3.arc().innerRadius(radius-40).outerRadius(radius).startAngle(arcScale(minValue)).endAngle(arcScale(maxValue));// Добавление арки в SVG\nchartGroup.append('path').attr('d',arc).attr('fill',arcColor);// Настройка шкалы для указателя\nconst pointerScale=d3.scaleLinear().domain([minValue,maxValue]).range([-Math.PI/2,Math.PI/2]);// Добавление указателя\nconst pointerAngle=pointerScale(sliderValue);const lineData=[[0,0],[0,-radius-8]];const lineGenerator=d3.line().x(d=>d[0]).y(d=>d[1]).curve(d3.curveLinear);chartGroup.append('path').attr('d',lineGenerator(lineData)).attr('class','pointer').attr('stroke','#42456C').attr('stroke-width',1.5).attr('transform',`rotate(${pointerAngle*180/Math.PI})`);// Добавление меток на шкале\nconst ticks=d3.range(minValue,maxValue+1);chartGroup.selectAll('text').data(ticks).enter().append('text').attr('x',d=>Math.cos(arcScale(d)-Math.PI/2)*(radius+16)).attr('y',d=>Math.sin(arcScale(d)-Math.PI/2)*(radius+16)).attr('text-anchor','middle').attr('alignment-baseline','middle').style('font-size','12px').style('letter-spacing','-0.6px')// уменьшение межбуквенного расстояния\n.attr('fill','#42456C').text(d=>d.toString());// Добавление points на шкале\nconst pointTicks=d3.range(minValue,maxValue+1);chartGroup.selectAll('.point').data(pointTicks).enter().append('circle').attr('class','point').attr('cx',d=>Math.cos(arcScale(d)-Math.PI/2)*(radius+6)).attr('cy',d=>Math.sin(arcScale(d)-Math.PI/2)*(radius+6)).attr('alignment-baseline','middle').attr('fill',arcColor).attr('r',2);}","map":{"version":3,"names":["d3","DrawEyesChart","SVG","width","arcColor","height","margin","sliderValue","xOffset","arguments","length","undefined","minValue","maxValue","radius","Math","min","chartGroup","select","empty","append","attr","selectAll","remove","arcScale","scaleLinear","domain","range","PI","arc","innerRadius","outerRadius","startAngle","endAngle","pointerScale","pointerAngle","lineData","lineGenerator","line","x","d","y","curve","curveLinear","ticks","data","enter","cos","sin","style","text","toString","pointTicks"],"sources":["/Users/mariashmakova/Projects/personal/kidti/src/Charts/EyesChart/DrawEyesChart.js"],"sourcesContent":["import * as d3 from \"d3\";\n\nexport function DrawEyesChart(\n  SVG, \n  width,\n  arcColor,\n  height,\n  margin,\n  sliderValue,\n  xOffset = 0\n) {\n  const minValue = -10;\n  const maxValue = 12;\n\n  // const arcColorFn = d3.interpolateHsl(d3.rgb('#e8e2ca'), d3.rgb('#3e6c0a'))\n\n const radius = Math.min(width, height) / 2 - margin - 4;\n  // Найти или создать контейнер для диаграммы\n  let chartGroup = SVG.select(`g.chartGroup-${xOffset}`);\n  if (chartGroup.empty()) {\n    chartGroup = SVG.append(\"g\")\n      .attr(\"class\", `chartGroup-${xOffset}`)\n      .attr(\"transform\", `translate(${width / 2 + xOffset}, ${height - margin})`);\n  }\n\n  // Очистка всех предыдущих элементов в chartGroup перед отрисовкой\n  chartGroup.selectAll(\"*\").remove();\n\n// Настройка шкалы\nconst arcScale = d3.scaleLinear()\n .domain([minValue, maxValue])\n .range([-Math.PI / 2, Math.PI / 2]);\n\n// Создание арки\nconst arc = d3.arc()\n .innerRadius(radius - 40)\n .outerRadius(radius)\n .startAngle(arcScale(minValue))\n .endAngle(arcScale(maxValue));\n\n// Добавление арки в SVG\nchartGroup.append('path')\n .attr('d', arc)\n  .attr('fill', arcColor);\n\n// Настройка шкалы для указателя\nconst pointerScale = d3.scaleLinear()\n .domain([minValue, maxValue])\n  .range([-Math.PI / 2, Math.PI / 2]);\n  \n\n// Добавление указателя\nconst pointerAngle = pointerScale(sliderValue);\n\nconst lineData = [\n [0, 0],\n [0, -radius - 8]\n];\n\nconst lineGenerator = d3.line()\n .x(d => d[0])\n .y(d => d[1])\n .curve(d3.curveLinear);\n\nchartGroup.append('path')\n  .attr('d', lineGenerator(lineData))\n  .attr('class', 'pointer')\n .attr('stroke', '#42456C')\n .attr('stroke-width', 1.5)\n .attr('transform', `rotate(${pointerAngle * 180 / Math.PI})`);\n\n// Добавление меток на шкале\nconst ticks = d3.range(minValue, maxValue + 1);\n\nchartGroup.selectAll('text')\n .data(ticks)\n .enter()\n .append('text')\n .attr('x', d => Math.cos(arcScale(d) - Math.PI / 2) * (radius + 16))\n .attr('y', d => Math.sin(arcScale(d) - Math.PI / 2) * (radius + 16))\n .attr('text-anchor', 'middle')\n  .attr('alignment-baseline', 'middle')\n  .style('font-size', '12px')\n  .style('letter-spacing', '-0.6px') // уменьшение межбуквенного расстояния\n  .attr('fill', '#42456C')\n  .text(d => d.toString());\n  \n  // Добавление points на шкале\nconst pointTicks = d3.range(minValue, maxValue + 1);\n\n  chartGroup.selectAll('.point')\n    .data(pointTicks)\n    .enter()\n    .append('circle')\n    .attr('class', 'point')\n    .attr('cx', d => Math.cos(arcScale(d) - Math.PI / 2) * (radius + 6))\n    .attr('cy', d => Math.sin(arcScale(d) - Math.PI / 2) * (radius + 6))\n    .attr('alignment-baseline', 'middle')\n    .attr('fill', arcColor)\n    .attr('r', 2);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}