{"ast":null,"code":"import{scaleLinear,scaleBand,max,extent,area,axisBottom}from'd3';import*as d3 from\"d3\";import{months}from'../../Utils/kit';import{sortDataByMonth}from'../../Shared/hendlers/sortDataByMoonth';export function DrowLineChart(SVG,data,height,width,margin,targetMonth,slider,HandleGraph){const xScale=scaleBand().domain(months.map(m=>m)).range([0,width]).padding(0.4);const yScale=scaleLinear().domain(extent([0,max(data,d=>d.value)+3])).nice().range([height-margin,margin*2]);sortDataByMonth(data);// Create groups for area, line, and points\nconst areaGroup=SVG.selectAll('.area-group');const pointGroup=SVG.selectAll('.point-group');// Remove and append new area group\nareaGroup.remove();const newAreaGroup=SVG.append('g').attr('class','area-group');// Add area\nconst areaGenerator=area().x(d=>xScale(d.month)+xScale.bandwidth()/2).y0(yScale(0))// Base line of the area\n.y1(d=>yScale(d.value)).curve(d3.curveLinear);newAreaGroup.append('path').datum(data).attr('class','area').attr('d',areaGenerator).attr('fill','#50C3F9')// Area color\n.attr('opacity',0.3);// Remove and append new point group\npointGroup.remove();const newPointGroup=SVG.append('g').attr('class','point-group');// Add points\nconst points=newPointGroup.selectAll('.point').data(data);// Enter\npoints.enter().append('circle').attr('class','point').attr('cx',d=>xScale(d.month)+xScale.bandwidth()/2).attr('cy',d=>yScale(d.value)).attr('r',8)// Radius of the points\n.attr('fill',d=>d.month===targetMonth?'#FF5C9D':'#50C3F9').style('cursor','pointer').on('click',(event,d)=>{HandleGraph(d);});// Update\npoints.transition().duration(600).attr('cx',d=>xScale(d.month)+xScale.bandwidth()/2).attr('cy',d=>slider>0&&d.month===targetMonth?yScale(slider):yScale(d.value)).attr('r',8)// Radius of the points\n.attr('fill',d=>d.month===targetMonth?'#FF5C9D':'#50C3F9');// Exit\npoints.exit().remove();// Add labels\nconst labels=SVG.selectAll('.label').data(data);// Enter\nlabels.enter().append('text').attr('class','label').attr('x',d=>xScale(d.month)+xScale.bandwidth()/2).attr('y',d=>yScale(d.value)-10)// Adjust vertical position\n.attr('text-anchor','middle').attr('fill',d=>d.month===targetMonth?'#FF5C9D':'#625F6C').text(d=>slider>0&&d.month===targetMonth?slider:d.value);// Update\nlabels.transition().duration(200).attr('x',d=>xScale(d.month)+xScale.bandwidth()/2).attr('y',d=>yScale(d.value)-10)// Adjust vertical position\n.attr('fill',d=>d.month===targetMonth?'#FF5C9D':'#625F6C').text(d=>slider>0&&d.month===targetMonth?slider:d.value);// Exit\nlabels.exit().remove();// Добавляем ось X\nSVG.selectAll('.x-axis').remove();const xAxisGroup=SVG.append('g').attr('class','x-axis').attr('transform',`translate(0,${height-margin})`).call(axisBottom(xScale).tickFormat(d=>d.slice(0,3))).selectAll('text').style('font-size','12px').style('cursor','pointer');xAxisGroup.style('fill',d=>d===targetMonth?'#FF5C9D':'#625F6C').on('click',(event,m)=>{const targetMonthData=data.find(item=>item.month===m);if(targetMonthData){HandleGraph({month:m,value:targetMonthData.value});}else{HandleGraph({month:m,value:0});}});}","map":{"version":3,"names":["scaleLinear","scaleBand","max","extent","area","axisBottom","d3","months","sortDataByMonth","DrowLineChart","SVG","data","height","width","margin","targetMonth","slider","HandleGraph","xScale","domain","map","m","range","padding","yScale","d","value","nice","areaGroup","selectAll","pointGroup","remove","newAreaGroup","append","attr","areaGenerator","x","month","bandwidth","y0","y1","curve","curveLinear","datum","newPointGroup","points","enter","style","on","event","transition","duration","exit","labels","text","xAxisGroup","call","tickFormat","slice","targetMonthData","find","item"],"sources":["/Users/mariashmakova/Projects/personal/kidti/src/Charts/WeightLineChart/DrowLineChart.js"],"sourcesContent":["import { scaleLinear,scaleBand, max, extent, area, axisBottom } from 'd3';\nimport * as d3 from \"d3\";\nimport { months } from '../../Utils/kit';\nimport { sortDataByMonth } from '../../Shared/hendlers/sortDataByMoonth';\n\nexport function DrowLineChart(\n  SVG,\n  data,\n  height,\n  width,\n  margin,\n  targetMonth,\n  slider,\n  HandleGraph\n) {\n\n  const xScale = scaleBand()\n  .domain(months.map(m => m))\n  .range([0, width])\n  .padding(0.4);\n  \n  const yScale = scaleLinear()\n    .domain(extent([0, max(data, d => d.value) + 3]))\n    .nice()\n    .range([height - margin, margin * 2]);\n\n  sortDataByMonth(data);\n\n  // Create groups for area, line, and points\n  const areaGroup = SVG.selectAll('.area-group');\n  const pointGroup = SVG.selectAll('.point-group');\n\n  // Remove and append new area group\n  areaGroup.remove();\n  const newAreaGroup = SVG.append('g').attr('class', 'area-group');\n\n  // Add area\n  const areaGenerator = area()\n    .x(d => xScale(d.month) + xScale.bandwidth() / 2)\n    .y0(yScale(0)) // Base line of the area\n    .y1(d => yScale(d.value))\n    .curve(d3.curveLinear);\n\n  newAreaGroup.append('path')\n    .datum(data)\n    .attr('class', 'area')\n    .attr('d', areaGenerator)\n    .attr('fill', '#50C3F9') // Area color\n    .attr('opacity', 0.3);\n\n  // Remove and append new point group\n  pointGroup.remove();\n  const newPointGroup = SVG.append('g').attr('class', 'point-group');\n\n  // Add points\n  const points = newPointGroup.selectAll('.point')\n    .data(data);\n\n  // Enter\n  points.enter()\n    .append('circle')\n    .attr('class', 'point')\n    .attr('cx', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('cy', d => yScale(d.value))\n    .attr('r', 8) // Radius of the points\n    .attr('fill', d =>\n      d.month === targetMonth\n        ? '#FF5C9D'\n        : '#50C3F9'\n    )\n    .style('cursor', 'pointer')\n    .on('click', (event, d) => {\n      HandleGraph(d);\n    });\n\n  // Update\n  points\n    .transition()\n    .duration(600)\n    .attr('cx', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('cy', d =>\n      slider > 0 && d.month === targetMonth\n        ? yScale(slider)\n        : yScale(d.value)\n    )\n    .attr('r', 8) // Radius of the points\n    .attr('fill', d =>\n      d.month === targetMonth\n        ? '#FF5C9D'\n        : '#50C3F9'\n    );\n\n  // Exit\n  points.exit().remove();\n\n  // Add labels\n  const labels = SVG.selectAll('.label')\n    .data(data);\n\n  // Enter\n  labels.enter()\n    .append('text')\n    .attr('class', 'label')\n    .attr('x', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('y', d => yScale(d.value) - 10) // Adjust vertical position\n    .attr('text-anchor', 'middle')\n    .attr('fill', d =>\n      d.month === targetMonth\n        ? '#FF5C9D'\n        : '#625F6C'\n    )\n    .text(d =>\n      slider > 0 && d.month === targetMonth\n        ? slider\n        : d.value);\n\n  // Update\n  labels\n    .transition()\n    .duration(200)\n    .attr('x', d => xScale(d.month) + xScale.bandwidth() / 2)\n    .attr('y', d => yScale(d.value) - 10) // Adjust vertical position\n    .attr('fill', d =>\n      d.month === targetMonth\n        ? '#FF5C9D'\n        : '#625F6C'\n    )\n    .text(d =>\n      slider > 0 && d.month === targetMonth\n        ? slider\n        : d.value);\n\n  // Exit\n  labels.exit().remove();\n\n    // Добавляем ось X\nSVG.selectAll('.x-axis').remove();\nconst xAxisGroup = SVG.append('g')\n  .attr('class', 'x-axis')\n  .attr('transform', `translate(0,${height - margin})`)\n  .call(axisBottom(xScale).tickFormat(d => d.slice(0, 3)))\n  .selectAll('text') \n  .style('font-size', '12px')\n  .style('cursor', 'pointer');\n  xAxisGroup\n    .style('fill', d => d === targetMonth ? '#FF5C9D' : '#625F6C')\n    .on('click', (event, m) => {\n      const targetMonthData = data.find(item => item.month === m)\n      if (targetMonthData) {\n        HandleGraph({ month: m, value: targetMonthData.value});\n      } else {\n        HandleGraph({ month: m, value: 0});\n      }\n    });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}